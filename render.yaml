databases:
  - name: miniparty-db
    plan: free
    region: oregon

services:
  - type: web
    name: miniparty-api
    runtime: docker
    repo: https://github.com/Akhildas-ts/mini-party
    branch: main
    rootDir: backend
    dockerfilePath: ./Dockerfile
    region: oregon
    plan: free
    autoDeploy: true
    healthCheckPath: /health

    envVars:
      # PostgreSQL connection string from the Render database
      - key: DATABASE_URL
        fromDatabase:
          name: miniparty-db
          property: connectionString

      # Admin password for the dashboard
      - key: ADMIN_SECRET
        value: anildas@123

      # Your Vercel URL (must match exactly, no trailing slash)
      - key: CORS_ORIGIN
        value: https://mini-party.vercel.app

      # Custom domain
      - key: CORS_ORIGIN_2
        value: https://miniparty.in

      # Gin production mode
      - key: GIN_MODE
        value: release

services:
  - type: web
    name: miniparty-api
    runtime: docker
    repo: https://github.com/Akhildas-ts/mini-party
    branch: main
    rootDir: backend
    dockerfilePath: ./Dockerfile
    region: oregon
    plan: free
    autoDeploy: true
    healthCheckPath: /health

    envVars:
      # Pulls TURSO_DATABASE_URL, TURSO_AUTH_TOKEN, and ADMIN_SECRET from the env group
      - fromGroup: miniparty_backend

      # Your Vercel URL (must match exactly, no trailing slash)
      - key: CORS_ORIGIN
        value: https://mini-party.vercel.app

      # Gin production mode
      - key: GIN_MODE
        value: release